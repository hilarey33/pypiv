<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Peak detection algorithms &#8212; pypiv a1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/my-styles.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Class for adaptiv Piv" href="adaptiv_piv.html" />
    <link rel="prev" title="Class for the FFT correlator" href="fft_correlator.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          PyPIV</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../examples.html">Examples</a></li>
                <li><a href="../api.html">Documentation</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">PyPIV Docs <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="direct_piv.html">Class for direct Piv</a></li>
<li class="toctree-l1"><a class="reference internal" href="grid_spec.html">Class for grid specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft_correlator.html">Class for the FFT correlator</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Peak detection algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="adaptiv_piv.html">Class for adaptiv Piv</a></li>
<li class="toctree-l1"><a class="reference internal" href="velocity_scaler.html">Class for scaling the velocity field</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolator.html">Cubic interpolator</a></li>
<li class="toctree-l1"><a class="reference internal" href="grid_deformator.html">Grid deformator class</a></li>
<li class="toctree-l1"><a class="reference internal" href="velofilter.html">Velocity Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters for outlier detection</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Peak detection algorithms</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="fft_correlator.html" title="Previous Chapter: Class for the FFT correlator"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Class for the...</span>
    </a>
  </li>
  <li>
    <a href="adaptiv_piv.html" title="Next Chapter: Class for adaptiv Piv"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Class for adaptiv Piv &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/piv/peak_detection.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="peak-detection-algorithms">
<h1>Peak detection algorithms<a class="headerlink" href="#peak-detection-algorithms" title="Permalink to this headline">¶</a></h1>
<p>The function to call for the peak detection is a switch for the different methods.</p>
<dl class="function">
<dt id="piv.peak_detection.find_peak">
<code class="descclassname">piv.peak_detection.</code><code class="descname">find_peak</code><span class="sig-paren">(</span><em>corr</em>, <em>method='gaussian'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/peak_detection.html#find_peak"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.find_peak" title="Permalink to this definition">¶</a></dt>
<dd><p>Peak detection algorithm switch</p>
<p>After loading the correlation window an maximum finder is invoked.
The correlation window is cut down to the necessary 9 points around the maximum.
Afterwards the maximum is checked not to be close to the boarder of the correlation frame.
This cropped window is used in along with the chosen method to interpolate the sub pixel shift.
Each interpolation method returns a tuple with the sub pixel shift in x and y direction.
The maximums position and the sub pixel shift are added and returned.
If an error occurred during the sub pixel interpolation the shift is set to nan.
Also if the interpolation method is unknown an exception in thrown.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>corr</strong> – correlation window</li>
<li><strong>method</strong> – peak finder algorithm (gaussian, centroid, parabolic, 9point)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first">Sub pixel interpolation method not found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">shift in interrogation window</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>It uses a function to check weather the maximum is inside or at the boarder of the correlation window.</p>
<dl class="function">
<dt id="piv.peak_detection.check_peak_position">
<code class="descclassname">piv.peak_detection.</code><code class="descname">check_peak_position</code><span class="sig-paren">(</span><em>corr</em>, <em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/peak_detection.html#check_peak_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.check_peak_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Checking weather the maximum is at the boarder of the correlation window</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>corr</strong> – correlation window</li>
<li><strong>i</strong> – first index position of the maximum</li>
<li><strong>j</strong> – second index position of the maximum</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">true if maximum is inside the correlation window</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>The interpolation for the sub pixel shift has four different algorithms.</p>
<dl class="function">
<dt id="piv.peak_detection.gaussian">
<code class="descclassname">piv.peak_detection.</code><code class="descname">gaussian</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/peak_detection.html#gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>Gaussian interpolation for sub pixel shift</p>
</dd></dl>

<dl class="function">
<dt id="piv.peak_detection.centroid">
<code class="descclassname">piv.peak_detection.</code><code class="descname">centroid</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/peak_detection.html#centroid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.centroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Centroid interpolation for sub pixel shift</p>
</dd></dl>

<dl class="function">
<dt id="piv.peak_detection.parabolic">
<code class="descclassname">piv.peak_detection.</code><code class="descname">parabolic</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/peak_detection.html#parabolic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.parabolic" title="Permalink to this definition">¶</a></dt>
<dd><p>Parabolic interpolation for sub pixel shift</p>
</dd></dl>

<dl class="function">
<dt id="piv.peak_detection.gaussian2D">
<code class="descclassname">piv.peak_detection.</code><code class="descname">gaussian2D</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/peak_detection.html#gaussian2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.gaussian2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Real 2D Gaussian interpolation for sub pixel shift</p>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016-2017, Jonas Ruebsam, Axel Rosenthal, Kevin Luedemann.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>