
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Class for adaptiv Piv &#8212; pypiv a1 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Class for scaling the velocity field" href="velocity_scaler.html" />
    <link rel="prev" title="Peak detection algorithms" href="peak_detection.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="velocity_scaler.html" title="Class for scaling the velocity field"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="peak_detection.html" title="Peak detection algorithms"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pypiv a1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="peak_detection.html"
                        title="previous chapter">Peak detection algorithms</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="velocity_scaler.html"
                        title="next chapter">Class for scaling the velocity field</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/piv/adaptiv_piv.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="class-for-adaptiv-piv">
<h1>Class for adaptiv Piv<a class="headerlink" href="#class-for-adaptiv-piv" title="Permalink to this headline">¶</a></h1>
<p>The sub class for the iterative part of the piv process is called Adaptive Piv.</p>
<dl class="class">
<dt id="piv.adaptive_piv.AdaptivePIV">
<em class="property">class </em><code class="descclassname">piv.adaptive_piv.</code><code class="descname">AdaptivePIV</code><span class="sig-paren">(</span><em>piv_object</em>, <em>window_size</em>, <em>search_size</em>, <em>distance</em>, <em>deformation='forward'</em>, <em>ipmethod='bilinear'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/adaptive_piv.html#AdaptivePIV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.adaptive_piv.AdaptivePIV" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for the adaptive piv.</p>
<p>After the initial piv is done an adaptive piv can be performed to minimize the error or to make the grid finer.
Therefore the correlation function is inherited as well as the GridSpec.
In addition to the inherited grid a new Grid is calculated by deforming the grid with respect to the prior calculated velocities.
In the case that the new grid is supposed to be finer then the one before, the velocities need to be upscaled.</p>
<p>Initialization as an extension of the super class.</p>
<p>The initialization of the super class is called to generate all necessary GridSpecs and grids.
Additional information are the deformation method and the interpolation method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>piv_object</strong> : Direct/AdaptivePIV</p>
<blockquote>
<div><p>object of the initial piv</p>
</div></blockquote>
<p><strong>window_size</strong> : int</p>
<blockquote>
<div><p>size of the interrogation window</p>
</div></blockquote>
<p><strong>search_size</strong> : int</p>
<blockquote>
<div><p>size of the search window</p>
</div></blockquote>
<p><strong>distance</strong> : int</p>
<blockquote>
<div><p>distance between beginning of the first interrogation window and second</p>
</div></blockquote>
<p><strong>deformation</strong> : str</p>
<blockquote>
<div><p>deformation method</p>
</div></blockquote>
<p><strong>ipmethod</strong> : str</p>
<blockquote class="last">
<div><p>interpolation method</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>In order to perform the deformation and needed interpolation a new method is introduced.</p>
<dl class="method">
<dt id="piv.adaptive_piv.AdaptivePIV._deform_grid">
<code class="descclassname">AdaptivePIV.</code><code class="descname">_deform_grid</code><span class="sig-paren">(</span><em>deformation_method</em>, <em>ipmethod</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/adaptive_piv.html#AdaptivePIV._deform_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.adaptive_piv.AdaptivePIV._deform_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Deforms the regular grid according to velocity and interpolates image.</p>
<p>In order to capture more particles flowing in the same direction as indicated by the previously calculated velocity field, 
the grid is deformed and the image corresponding to that grid spot interpolated from the original image.
This gives a new grid with interpolated particle spots.
Here two methods are available:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>central:</dt>
<dd>Leeds to a half deformation in both directions, forward and backwards.
This as well leads to two times the computation of the deformation.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>forward:</dt>
<dd>Leeds to a full deformation in forward direction</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>deformation_method</strong> : str</p>
<blockquote>
<div><p>deformation method, mentioned above</p>
</div></blockquote>
<p><strong>ipmethod</strong> : str</p>
<blockquote class="last">
<div><p>interpolation method passed along to the interpolator</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>For inclusion of these two different deformation methods into the correlation, the function getting the sub images has to be overridden.</p>
<dl class="method">
<dt id="piv.adaptive_piv.AdaptivePIV._get_window_frames">
<code class="descclassname">AdaptivePIV.</code><code class="descname">_get_window_frames</code><span class="sig-paren">(</span><em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/piv/adaptive_piv.html#AdaptivePIV._get_window_frames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.adaptive_piv.AdaptivePIV._get_window_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Function override in order to include the two different deformation methods.</p>
<p>Functionality is the same as</p>
<dl class="method">
<dt id="piv.direct_piv.AdaptivePIV.DirectPIV._get_window_frames">
<code class="descclassname">DirectPIV.</code><code class="descname">_get_window_frames</code><span class="sig-paren">(</span><em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="headerlink" href="#piv.direct_piv.AdaptivePIV.DirectPIV._get_window_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sub images of image attribute a and b at position i,j.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int</em>) – first index of grid coordinates</li>
<li><strong>j</strong> (<em>int</em>) – second index of grid coordinates</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">sub frame as interrogation and search window for correlation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>but in this function, before the window in handed over the deformation is performed for that grid point.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="velocity_scaler.html" title="Class for scaling the velocity field"
             >next</a> |</li>
        <li class="right" >
          <a href="peak_detection.html" title="Peak detection algorithms"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pypiv a1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2017, Jonas Ruebsam, Axel Rosenthal, Kevin Luedemann.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>